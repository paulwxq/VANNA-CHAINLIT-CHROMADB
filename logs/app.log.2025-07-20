2025-07-20 00:49:17 [INFO] [app.ConfigUtils] utils.py:187 - === 当前模型配置 ===
2025-07-20 00:49:17 [INFO] [app.ConfigUtils] utils.py:188 - LLM提供商: api
2025-07-20 00:49:17 [INFO] [app.ConfigUtils] utils.py:189 - LLM模型: qianwen
2025-07-20 00:49:17 [INFO] [app.ConfigUtils] utils.py:190 - Embedding提供商: api
2025-07-20 00:49:17 [INFO] [app.ConfigUtils] utils.py:191 - Embedding模型: text-embedding-v4
2025-07-20 00:49:17 [INFO] [app.ConfigUtils] utils.py:192 - 向量数据库: pgvector
2025-07-20 00:49:17 [INFO] [app.ConfigUtils] utils.py:193 - ==================
2025-07-20 00:49:18 [INFO] [app.RedisConversationManager] redis_conversation_manager.py:35 - Redis连接成功: localhost:6379
2025-07-20 00:49:18 [INFO] [app.ConfigUtils] utils.py:187 - === 当前模型配置 ===
2025-07-20 00:49:18 [INFO] [app.ConfigUtils] utils.py:188 - LLM提供商: api
2025-07-20 00:49:18 [INFO] [app.ConfigUtils] utils.py:189 - LLM模型: qianwen
2025-07-20 00:49:18 [INFO] [app.ConfigUtils] utils.py:190 - Embedding提供商: api
2025-07-20 00:49:18 [INFO] [app.ConfigUtils] utils.py:191 - Embedding模型: text-embedding-v4
2025-07-20 00:49:18 [INFO] [app.ConfigUtils] utils.py:192 - 向量数据库: pgvector
2025-07-20 00:49:18 [INFO] [app.ConfigUtils] utils.py:193 - ==================
2025-07-20 00:49:20 [INFO] [app.UnifiedApp] unified_api.py:2780 - 🚀 启动统一API服务...
2025-07-20 00:49:20 [INFO] [app.UnifiedApp] unified_api.py:2781 - 📍 服务地址: http://localhost:8084
2025-07-20 00:49:20 [INFO] [app.UnifiedApp] unified_api.py:2782 - 🔗 健康检查: http://localhost:8084/health
2025-07-20 00:49:20 [INFO] [app.UnifiedApp] unified_api.py:2783 - 📘 React Agent API: http://localhost:8084/api/v0/ask_react_agent
2025-07-20 00:49:20 [INFO] [app.UnifiedApp] unified_api.py:2784 - 📘 LangGraph Agent API: http://localhost:8084/api/v0/ask_agent
2025-07-20 00:49:20 [INFO] [app.UnifiedApp] unified_api.py:2791 - 🚀 使用ASGI模式启动异步Flask应用...
2025-07-20 00:49:20 [INFO] [app.UnifiedApp] unified_api.py:2792 -    这将解决事件循环冲突问题，支持LangGraph异步checkpoint保存
2025-07-20 00:49:49 [INFO] [app.RedisConversationManager] redis_conversation_manager.py:185 - 创建对话成功: conv_1752943789_4cb4271a
2025-07-20 00:49:49 [INFO] [app.UnifiedApp] unified_api.py:820 - [AGENT_API] 新对话，无上下文
2025-07-20 00:49:49 [INFO] [app.UnifiedApp] unified_api.py:832 - [AGENT_API] 使用配置文件路由模式: hybrid
2025-07-20 00:49:51 [INFO] [app.UnifiedApp] unified_api.py:683 - 开始创建LangGraph Agent实例...
2025-07-20 00:49:55 [INFO] [app.UnifiedApp] unified_api.py:685 - LangGraph Agent实例创建成功
2025-07-20 00:49:55 [INFO] [app.VannaSingleton] vanna_instance.py:29 - 创建 Vanna 实例...
2025-07-20 00:49:55 [INFO] [app.ConfigUtils] utils.py:187 - === 当前模型配置 ===
2025-07-20 00:49:55 [INFO] [app.ConfigUtils] utils.py:188 - LLM提供商: api
2025-07-20 00:49:55 [INFO] [app.ConfigUtils] utils.py:189 - LLM模型: qianwen
2025-07-20 00:49:55 [INFO] [app.ConfigUtils] utils.py:190 - Embedding提供商: api
2025-07-20 00:49:55 [INFO] [app.ConfigUtils] utils.py:191 - Embedding模型: text-embedding-v4
2025-07-20 00:49:55 [INFO] [app.ConfigUtils] utils.py:192 - 向量数据库: pgvector
2025-07-20 00:49:55 [INFO] [app.ConfigUtils] utils.py:193 - ==================
2025-07-20 00:49:58 [INFO] [app.VannaSingleton] vanna_instance.py:34 - Vanna 实例创建成功
2025-07-20 00:51:35 [WARNING] [app.UnifiedApp] unified_api.py:748 - 获取上下文类型失败: 'RedisConversationManager' object has no attribute 'get_messages'
2025-07-20 00:51:35 [INFO] [app.UnifiedApp] unified_api.py:817 - [AGENT_API] 使用上下文，长度: 52字符
2025-07-20 00:51:35 [INFO] [app.UnifiedApp] unified_api.py:832 - [AGENT_API] 使用配置文件路由模式: hybrid
2025-07-20 00:53:20 [WARNING] [app.UnifiedApp] unified_api.py:748 - 获取上下文类型失败: 'RedisConversationManager' object has no attribute 'get_messages'
2025-07-20 00:53:21 [INFO] [app.UnifiedApp] unified_api.py:817 - [AGENT_API] 使用上下文，长度: 100字符
2025-07-20 00:53:21 [INFO] [app.UnifiedApp] unified_api.py:826 - [AGENT_API] 使用API指定的路由模式: chat_direct
2025-07-20 01:12:13 [WARNING] [app.UnifiedApp] unified_api.py:748 - 获取上下文类型失败: 'RedisConversationManager' object has no attribute 'get_messages'
2025-07-20 01:12:13 [INFO] [app.UnifiedApp] unified_api.py:817 - [AGENT_API] 使用上下文，长度: 174字符
2025-07-20 01:12:13 [INFO] [app.UnifiedApp] unified_api.py:826 - [AGENT_API] 使用API指定的路由模式: database_direct
2025-07-20 01:56:44 [INFO] [app.UnifiedApp] unified_api.py:2771 - 接收到信号 2，准备退出...
2025-07-20 01:56:44 [ERROR] [app.UnifiedApp] unified_api.py:521 - 清理资源失败: asyncio.run() cannot be called from a running event loop
2025-07-20 01:57:09 [INFO] [app.ConfigUtils] utils.py:187 - === 当前模型配置 ===
2025-07-20 01:57:09 [INFO] [app.ConfigUtils] utils.py:188 - LLM提供商: api
2025-07-20 01:57:09 [INFO] [app.ConfigUtils] utils.py:189 - LLM模型: qianwen
2025-07-20 01:57:09 [INFO] [app.ConfigUtils] utils.py:190 - Embedding提供商: api
2025-07-20 01:57:09 [INFO] [app.ConfigUtils] utils.py:191 - Embedding模型: text-embedding-v4
2025-07-20 01:57:09 [INFO] [app.ConfigUtils] utils.py:192 - 向量数据库: pgvector
2025-07-20 01:57:09 [INFO] [app.ConfigUtils] utils.py:193 - ==================
2025-07-20 01:57:10 [INFO] [app.RedisConversationManager] redis_conversation_manager.py:35 - Redis连接成功: localhost:6379
2025-07-20 01:57:10 [INFO] [app.ConfigUtils] utils.py:187 - === 当前模型配置 ===
2025-07-20 01:57:10 [INFO] [app.ConfigUtils] utils.py:188 - LLM提供商: api
2025-07-20 01:57:10 [INFO] [app.ConfigUtils] utils.py:189 - LLM模型: qianwen
2025-07-20 01:57:10 [INFO] [app.ConfigUtils] utils.py:190 - Embedding提供商: api
2025-07-20 01:57:10 [INFO] [app.ConfigUtils] utils.py:191 - Embedding模型: text-embedding-v4
2025-07-20 01:57:10 [INFO] [app.ConfigUtils] utils.py:192 - 向量数据库: pgvector
2025-07-20 01:57:10 [INFO] [app.ConfigUtils] utils.py:193 - ==================
2025-07-20 01:57:12 [INFO] [app.UnifiedApp] unified_api.py:2780 - 🚀 启动统一API服务...
2025-07-20 01:57:12 [INFO] [app.UnifiedApp] unified_api.py:2781 - 📍 服务地址: http://localhost:8084
2025-07-20 01:57:12 [INFO] [app.UnifiedApp] unified_api.py:2782 - 🔗 健康检查: http://localhost:8084/health
2025-07-20 01:57:12 [INFO] [app.UnifiedApp] unified_api.py:2783 - 📘 React Agent API: http://localhost:8084/api/v0/ask_react_agent
2025-07-20 01:57:12 [INFO] [app.UnifiedApp] unified_api.py:2784 - 📘 LangGraph Agent API: http://localhost:8084/api/v0/ask_agent
2025-07-20 01:57:12 [INFO] [app.UnifiedApp] unified_api.py:2791 - 🚀 使用ASGI模式启动异步Flask应用...
2025-07-20 01:57:12 [INFO] [app.UnifiedApp] unified_api.py:2792 -    这将解决事件循环冲突问题，支持LangGraph异步checkpoint保存
2025-07-20 01:57:31 [INFO] [app.RedisConversationManager] redis_conversation_manager.py:185 - 创建对话成功: conv_1752947851_e48d2bd2
2025-07-20 01:57:31 [INFO] [app.UnifiedApp] unified_api.py:820 - [AGENT_API] 新对话，无上下文
2025-07-20 01:57:31 [INFO] [app.UnifiedApp] unified_api.py:832 - [AGENT_API] 使用配置文件路由模式: hybrid
2025-07-20 01:57:32 [INFO] [app.UnifiedApp] unified_api.py:683 - 开始创建LangGraph Agent实例...
2025-07-20 01:57:35 [INFO] [app.UnifiedApp] unified_api.py:685 - LangGraph Agent实例创建成功
2025-07-20 01:57:35 [INFO] [app.VannaSingleton] vanna_instance.py:29 - 创建 Vanna 实例...
2025-07-20 01:57:35 [INFO] [app.ConfigUtils] utils.py:187 - === 当前模型配置 ===
2025-07-20 01:57:35 [INFO] [app.ConfigUtils] utils.py:188 - LLM提供商: api
2025-07-20 01:57:35 [INFO] [app.ConfigUtils] utils.py:189 - LLM模型: qianwen
2025-07-20 01:57:35 [INFO] [app.ConfigUtils] utils.py:190 - Embedding提供商: api
2025-07-20 01:57:35 [INFO] [app.ConfigUtils] utils.py:191 - Embedding模型: text-embedding-v4
2025-07-20 01:57:35 [INFO] [app.ConfigUtils] utils.py:192 - 向量数据库: pgvector
2025-07-20 01:57:35 [INFO] [app.ConfigUtils] utils.py:193 - ==================
2025-07-20 01:57:37 [INFO] [app.VannaSingleton] vanna_instance.py:34 - Vanna 实例创建成功
2025-07-20 01:58:41 [INFO] [app.test_app] <string>:14 - 测试app模块日志 - 时间滚动配置
2025-07-20 02:00:30 [INFO] [app.UnifiedApp] unified_api.py:2771 - 接收到信号 2，准备退出...
2025-07-20 02:00:30 [ERROR] [app.UnifiedApp] unified_api.py:521 - 清理资源失败: asyncio.run() cannot be called from a running event loop
