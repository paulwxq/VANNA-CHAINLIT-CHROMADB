-- Schema Tools生成的主题元数据
-- 业务背景: 测试完整执行流程
-- 生成时间: 2025-07-03 01:44:11
-- 数据库: highway_db

-- 创建表（如果不存在）
CREATE TABLE IF NOT EXISTS metadata (
    id SERIAL PRIMARY KEY,    -- 主键
    topic_name VARCHAR(100) NOT NULL,  -- 业务主题名称
    description TEXT,                  -- 业务主体说明
    related_tables TEXT[],			  -- 相关表名
    biz_entities TEXT[],               -- 主要业务实体名称
    biz_metrics TEXT[],                -- 主要业务指标名称
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    -- 插入时间
);

-- 插入主题数据
INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '日营业数据分析',
  '基于bss_business_day_data表，分析各服务区每日支付方式分布及营收趋势，优化收款策略',
  'bss_business_day_data,bss_service_area',
  '服务区,支付方式,日期',
  '收入趋势,支付方式占比,订单量对比'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车辆流量分析',
  '通过bss_car_day_count表统计各服务区车辆类型分布，结合地理位置分析客流特征',
  'bss_car_day_count,bss_service_area',
  '服务区,车辆类型,统计日期',
  '车流趋势,车型占比,区域客流排名'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '公司经营对比',
  '关联bss_company与bss_service_area表，对比不同公司下属服务区营收能力差异',
  'bss_company,bss_service_area,bss_business_day_data',
  '公司,服务区,月份',
  '人均消费,客单价对比,增长率排名'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '路线效能评估',
  '结合bss_section_route_area_link与业务数据，分析不同路线关联服务区的运营效率',
  'bss_section_route,bss_section_route_area_link,bss_business_day_data',
  '路线,服务区,路段',
  '单位车流营收,路线覆盖率,坪效对比'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '服务区间联动分析',
  '通过bss_service_area_mapper关联主数据，分析相邻服务区间的业务协同效应',
  'bss_service_area_mapper,bss_business_day_data,bss_car_day_count',
  '服务区,数据来源,编码类型',
  '同环比增长,跨区消费链,车流转化率'
);

