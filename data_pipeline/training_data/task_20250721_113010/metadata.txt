-- Schema Tools生成的主题元数据
-- 业务背景: 高速公路服务区管理系统
-- 生成时间: 2025-07-21 12:25:36
-- 数据库: highway_db

-- 创建表（如果不存在）
CREATE TABLE IF NOT EXISTS metadata (
    id SERIAL PRIMARY KEY,    -- 主键
    topic_name VARCHAR(100) NOT NULL,  -- 业务主题名称
    description TEXT,                  -- 业务主体说明
    related_tables TEXT[],			  -- 相关表名
    biz_entities TEXT[],               -- 主要业务实体名称
    biz_metrics TEXT[],                -- 主要业务指标名称
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    -- 插入时间
);

-- 插入主题数据
INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '日营业数据分析',
  '基于 bss_business_day_data 表，分析每个服务区和档口每天的营业收入、订单数量、支付方式等，用于评估运营表现和优化支付策略。',
  'bss_business_day_data',
  '服务区,档口,支付方式,统计日期',
  '总收入,订单总数,支付方式占比,日收入趋势'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车流统计分析',
  '通过 bss_car_day_count 表分析各服务区每日车辆类型和数量分布，辅助交通管理及服务区资源配置。',
  'bss_car_day_count,bss_service_area',
  '服务区,车辆类型,统计日期',
  '总车流量,车辆类型占比,日车流趋势'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '公司运营对比',
  '结合 bss_company 和 bss_service_area 表，分析各分公司下属服务区的运营情况，支持公司绩效评估与资源分配。',
  'bss_company,bss_service_area,bss_business_day_data',
  '公司,服务区,统计日期',
  '公司营收排名,服务区营收对比,日均收入'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '服务区路线分布',
  '通过 bss_section_route_area_link 和 bss_section_route 表，分析各路线对应服务区的覆盖情况，支持路线规划和服务区布局优化。',
  'bss_section_route,bss_section_route_area_link,bss_service_area',
  '路线,服务区,路段',
  '路线服务区数量,路段覆盖情况,服务区路线分布'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '数据来源分析',
  '基于 bss_service_area_mapper 表，分析不同数据来源（如驿购、驿美）的服务区数据分布，评估数据采集系统的覆盖与质量。',
  'bss_service_area_mapper,bss_service_area',
  '数据来源,服务区',
  '来源服务区数量,数据来源分布,来源数据覆盖'
);

