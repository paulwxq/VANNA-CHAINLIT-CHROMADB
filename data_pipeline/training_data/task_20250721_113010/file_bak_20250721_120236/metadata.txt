-- Schema Tools生成的主题元数据
-- 业务背景: 高速公路服务区管理系统
-- 生成时间: 2025-07-21 11:41:23
-- 数据库: highway_db

-- 创建表（如果不存在）
CREATE TABLE IF NOT EXISTS metadata (
    id SERIAL PRIMARY KEY,    -- 主键
    topic_name VARCHAR(100) NOT NULL,  -- 业务主题名称
    description TEXT,                  -- 业务主体说明
    related_tables TEXT[],			  -- 相关表名
    biz_entities TEXT[],               -- 主要业务实体名称
    biz_metrics TEXT[],                -- 主要业务指标名称
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    -- 插入时间
);

-- 插入主题数据
INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '日营收分析',
  '分析各服务区每日营业收入、订单数量及支付方式分布，评估经营状况并优化财务策略。',
  'bss_business_day_data',
  '服务区,档口,支付方式,统计日期',
  '日收入总额,订单总数,支付方式占比,服务区营收排名'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车流统计分析',
  '通过车辆进入服务区的数据，分析车流趋势及类型分布，辅助服务区资源配置与交通管理。',
  'bss_car_day_count,bss_service_area',
  '服务区,车辆类型,统计日期',
  '日车流量,车辆类型占比,车流趋势变化'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '公司管辖分析',
  '基于公司与服务区的归属关系，分析各分公司管理的服务区数量与分布，优化组织运营效率。',
  'bss_company,bss_service_area',
  '公司,服务区,服务区状态',
  '公司服务区数量,开放与关闭服务区比例'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '服务区路线关联',
  '分析服务区与路段路线的关联关系，明确服务区的地理位置分布与路线覆盖情况。',
  'bss_section_route,bss_section_route_area_link,bss_service_area',
  '路段,路线,服务区',
  '路线覆盖服务区数量,服务区路段分布'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '数据来源分析',
  '分析不同数据来源（如驿购、驿美、手工录入）对服务区数据质量的影响，优化数据采集机制。',
  'bss_service_area_mapper',
  '数据来源类别,服务区',
  '来源数据分布,服务区间来源对比'
);

