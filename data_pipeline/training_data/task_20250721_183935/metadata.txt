-- Schema Tools生成的主题元数据
-- 业务背景: 高速公路服务区管理系统
-- 生成时间: 2025-07-21 19:51:31
-- 数据库: highway_db

-- 创建表（如果不存在）
CREATE TABLE IF NOT EXISTS metadata (
    id SERIAL PRIMARY KEY,    -- 主键
    topic_name VARCHAR(100) NOT NULL,  -- 业务主题名称
    description TEXT,                  -- 业务主体说明
    related_tables TEXT[],			  -- 相关表名
    biz_entities TEXT[],               -- 主要业务实体名称
    biz_metrics TEXT[],                -- 主要业务指标名称
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    -- 插入时间
);

-- 插入主题数据
INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '日营业数据分析',
  '基于 bss_business_day_data 表，分析每个服务区和档口每天的营业收入、订单数量、支付方式等经营情况，帮助优化运营策略。',
  'bss_business_day_data,bss_service_area',
  '服务区,档口,支付方式,营收',
  '收入趋势,服务区对比,支付方式分布'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车流统计分析',
  '基于 bss_car_day_count 表，按日期和车辆类型分析各服务区的车辆通行量，辅助车流高峰期的资源配置与营销决策。',
  'bss_car_day_count,bss_service_area',
  '服务区,车辆类型,日期,车流量',
  '车流趋势,车型占比,服务区车流排名'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '公司营收对比',
  '结合 bss_company 和 bss_service_area 表，分析不同公司下属服务区的营业收入情况，支持公司层级的业绩评估。',
  'bss_company,bss_service_area,bss_business_day_data',
  '公司,服务区,日期,营收',
  '公司营收排名,月度对比,日均营收'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '路段车流与营收关联',
  '结合 bss_section_route 和 bss_car_day_count、bss_business_day_data 表，分析不同路段对应服务区的车流与营收关系，支持路段运营优化。',
  'bss_section_route,bss_section_route_area_link,bss_car_day_count,bss_business_day_data',
  '路段,路线,车流量,营收',
  '车流营收相关性,路段营收排名,车流营收趋势'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '服务区状态与营收',
  '基于 bss_service_area 和 bss_business_day_data 表，分析不同状态（开放/关闭）的服务区对营收的影响，支持资源调度决策。',
  'bss_service_area,bss_business_day_data',
  '服务区,服务状态,日期,营收',
  '状态营收对比,开放服务区排名,关闭影响分析'
);

