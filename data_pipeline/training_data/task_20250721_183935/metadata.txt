-- Schema Tools生成的主题元数据
-- 业务背景: 高速公路服务区管理系统
-- 生成时间: 2025-07-21 20:13:55
-- 数据库: highway_db

-- 创建表（如果不存在）
CREATE TABLE IF NOT EXISTS metadata (
    id SERIAL PRIMARY KEY,    -- 主键
    topic_name VARCHAR(100) NOT NULL,  -- 业务主题名称
    description TEXT,                  -- 业务主体说明
    related_tables TEXT[],			  -- 相关表名
    biz_entities TEXT[],               -- 主要业务实体名称
    biz_metrics TEXT[],                -- 主要业务指标名称
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    -- 插入时间
);

-- 插入主题数据
INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '日营业分析',
  '基于每日经营数据，分析各服务区及档口的收入趋势、订单结构和支付方式分布，辅助运营决策优化。',
  'bss_business_day_data',
  '服务区,档口,支付方式',
  '总收入,订单总数,支付方式占比,日环比增长'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车流特征分析',
  '结合车辆类型与日期维度，识别不同服务区过境、城际等车流变化规律，支撑资源调度与服务配置。',
  'bss_car_day_count,bss_service_area',
  '车辆类型,服务区,统计日期',
  '车流量趋势,车型占比,服务区车流排名'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '公司业绩对比',
  '按所属公司汇总营收和订单数据，横向比较各分公司经营能力，支持绩效考核与资源倾斜策略制定。',
  'bss_business_day_data,bss_service_area,bss_company',
  '公司,服务区,支付方式',
  '总营收,订单量,人均消费,公司间对比'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '路段流量关联',
  '通过路段-服务区映射关系，分析不同高速路段下辖服务区的车流与消费关联性，挖掘潜力区域。',
  'bss_section_route,bss_section_route_area_link,bss_car_day_count,bss_business_day_data',
  '路段名称,路线名称,服务区',
  '平均车流量,单位车流转化收入,路段综合活跃度'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '数据来源质量',
  '评估不同系统（如驿购、驿美）提供的经营数据在数量、完整性上的差异，提升数据治理水平。',
  'bss_service_area_mapper,bss_business_day_data',
  '数据来源系统,服务区,统计日期',
  '记录数分布,数据更新频率,来源系统覆盖率'
);

