-- Schema Tools生成的主题元数据
-- 业务背景: 高速公路服务区管理系统
-- 生成时间: 2025-07-01 21:44:31
-- 数据库: highway_db

-- 创建表（如果不存在）
CREATE TABLE IF NOT EXISTS metadata (
    id SERIAL PRIMARY KEY,    -- 主键
    topic_name VARCHAR(100) NOT NULL,  -- 业务主题名称
    description TEXT,                  -- 业务主体说明
    related_tables TEXT[],			  -- 相关表名
    biz_entities TEXT[],               -- 主要业务实体名称
    biz_metrics TEXT[],                -- 主要业务指标名称
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    -- 插入时间
);

-- 插入主题数据
INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '支付方式分析',
  '分析不同支付方式（微信、支付宝、现金等）在各服务区的使用占比及交易金额分布',
  'bss_business_day_data',
  '服务区,支付类型,档口',
  '支付占比,交易金额分布,订单量对比'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车流高峰分析',
  '基于车辆类型统计表，识别各服务区在不同日期的车辆高峰时段及车型分布特征',
  'bss_car_day_count',
  '服务区,车辆类型,统计日期',
  '高峰时段识别,车型占比分析,车流量趋势'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '营收对比分析',
  '对比不同服务区在相同时间段内的日均营收及订单量差异，识别头部和尾部区域',
  'bss_business_day_data',
  '服务区,档口,统计周期',
  '日均营收对比,订单量排名,营收增长率'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '档口效能评估',
  '分析各档口单位面积营收能力及客单价水平，评估空间资源利用效率',
  'bss_business_day_data',
  '档口,服务区,支付渠道',
  '单位面积收益,客单价分析,坪效排名'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车型消费关联',
  '结合车辆类型数据和消费数据，分析不同类型车辆停留期间的消费行为特征',
  'bss_car_day_count,bss_business_day_data',
  '车辆类型,服务区,消费时段',
  '人均消费分析,消费频次关联,车型消费转化率'
);

