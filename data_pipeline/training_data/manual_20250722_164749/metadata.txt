-- Schema Tools生成的主题元数据
-- 业务背景: 高速公路服务区管理系统
-- 生成时间: 2025-07-22 16:55:43
-- 数据库: highway_db

-- 创建表（如果不存在）
CREATE TABLE IF NOT EXISTS metadata (
    id SERIAL PRIMARY KEY,    -- 主键
    topic_name VARCHAR(100) NOT NULL,  -- 业务主题名称
    description TEXT,                  -- 业务主体说明
    related_tables TEXT[],			  -- 相关表名
    biz_entities TEXT[],               -- 主要业务实体名称
    biz_metrics TEXT[],                -- 主要业务指标名称
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    -- 插入时间
);

-- 插入主题数据
INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '营收分析',
  '基于每日经营数据，分析各服务区及档口的收入趋势、订单分布与支付方式结构，支撑经营决策优化。',
  'bss_business_day_data,bss_service_area,bss_company',
  '服务区,档口,公司,支付方式',
  '总支付金额,订单总数,收入趋势,支付方式占比,服务区对比'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车流分析',
  '结合车辆类型与日流量数据，分析各服务区车流构成及时序变化，辅助服务资源配置与营销策略制定。',
  'bss_car_day_count,bss_service_area,bss_section_route,bss_company',
  '服务区,车辆类别,路段,公司',
  '日均车流量,车类分布,车流趋势,服务区排名,跨路段对比'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '公司绩效',
  '从所属公司维度汇总营收与车流数据，评估各分公司管理效能与市场表现，支持绩效考核与资源分配。',
  'bss_business_day_data,bss_car_day_count,bss_service_area,bss_company',
  '公司,服务区,统计日期',
  '公司总营收,平均单区产出,车流覆盖率,同比增长率,公司间对比'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '路段关联',
  '分析不同路段路线下的服务区运营与车流情况，识别高价值路线，优化路网服务布局与招商策略。',
  'bss_section_route,bss_section_route_area_link,bss_service_area,bss_business_day_data,bss_car_day_count',
  '路段,路线,服务区,公司',
  '路段总营收,单区平均车流,路线密度,服务区覆盖率,路段排名'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '状态监控',
  '统计不同类型与状态的服务区数量分布及其运营数据差异，掌握开放服务能力与系统覆盖情况。',
  'bss_service_area,bss_business_day_data,bss_car_day_count',
  '服务区状态,服务区类型,服务区,公司',
  '开放服务区数,状态分布,运营率,异常状态预警,类型对比'
);

