-- Schema Tools生成的主题元数据
-- 业务背景: 高速公路服务区管理系统
-- 生成时间: 2025-07-21 01:06:58
-- 数据库: highway_db

-- 创建表（如果不存在）
CREATE TABLE IF NOT EXISTS metadata (
    id SERIAL PRIMARY KEY,    -- 主键
    topic_name VARCHAR(100) NOT NULL,  -- 业务主题名称
    description TEXT,                  -- 业务主体说明
    related_tables TEXT[],			  -- 相关表名
    biz_entities TEXT[],               -- 主要业务实体名称
    biz_metrics TEXT[],                -- 主要业务指标名称
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    -- 插入时间
);

-- 插入主题数据
INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '日营业数据分析',
  '分析每个服务区和档口每日的营业收入、订单数量及支付方式分布，支撑经营优化决策。',
  'bss_business_day_data',
  '服务区,档口,支付方式,统计日期',
  '收入趋势,订单数量,支付方式占比,服务区对比'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车流统计分析',
  '基于车辆进入服务区的数据，分析车流数量及类型分布，为设施规划和运营管理提供依据。',
  'bss_car_day_count,bss_service_area',
  '服务区,车辆类型,统计日期',
  '车流趋势,车辆类型占比,服务区车流排名'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '公司运营对比',
  '对比不同公司管辖服务区的营业收入和车流数据，评估各公司的运营绩效。',
  'bss_company,bss_service_area,bss_business_day_data,bss_car_day_count',
  '公司,服务区,支付方式',
  '公司营收排名,公司车流排名,单位车流营收对比'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '服务区路段关联分析',
  '分析服务区与路段路线的关联关系，评估路段车流对服务区业务的影响。',
  'bss_section_route,bss_section_route_area_link,bss_service_area,bss_car_day_count',
  '路段,路线,服务区',
  '路段服务区数量,路段车流总量,服务区车流分布'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '服务区状态与营收关系',
  '分析服务区开放与关闭状态对营业收入的影响，优化服务区运营策略。',
  'bss_service_area,bss_business_day_data',
  '服务区,服务状态,统计日期',
  '开放状态营收,关闭状态营收,营收状态对比'
);

