-- Schema Tools生成的主题元数据
-- 业务背景: 高速公路服务区管理系统
-- 生成时间: 2025-07-21 00:27:47
-- 数据库: highway_db

-- 创建表（如果不存在）
CREATE TABLE IF NOT EXISTS metadata (
    id SERIAL PRIMARY KEY,    -- 主键
    topic_name VARCHAR(100) NOT NULL,  -- 业务主题名称
    description TEXT,                  -- 业务主体说明
    related_tables TEXT[],			  -- 相关表名
    biz_entities TEXT[],               -- 主要业务实体名称
    biz_metrics TEXT[],                -- 主要业务指标名称
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    -- 插入时间
);

-- 插入主题数据
INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '日营收分析',
  '基于 bss_business_day_data 表，分析各服务区每日营收、订单结构及支付方式分布，用于经营优化。',
  'bss_business_day_data,bss_service_area',
  '服务区,档口,支付方式,统计日期',
  '总营收,订单数量,支付方式占比,日营收趋势'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车流统计分析',
  '基于 bss_car_day_count 表，分析各服务区每日车辆类型及数量变化，用于车流与运营关联分析。',
  'bss_car_day_count,bss_service_area',
  '服务区,车辆类型,统计日期',
  '车流量趋势,车辆类型分布,车流量排名'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '公司业绩对比',
  '结合 bss_company 和 bss_service_area，分析各公司下属服务区营收与车流表现，支持公司级管理决策。',
  'bss_company,bss_service_area,bss_business_day_data,bss_car_day_count',
  '公司,服务区,统计日期',
  '平均营收,车流总量,营收排名,车流排名'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '路线关联分析',
  '基于 bss_section_route 和 bss_section_route_area_link，分析路线与服务区的关联关系，支持路网运营优化。',
  'bss_section_route,bss_section_route_area_link,bss_service_area',
  '路段,路线,服务区',
  '服务区数量,路段覆盖,路线关联度'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '服务区状态分析',
  '基于 bss_service_area 表，分析服务区类型、状态分布及地理位置，支持服务区布局与运营策略制定。',
  'bss_service_area,bss_company',
  '服务区,类型,状态,公司',
  '服务区数量,开放比例,区域分布,公司覆盖率'
);

