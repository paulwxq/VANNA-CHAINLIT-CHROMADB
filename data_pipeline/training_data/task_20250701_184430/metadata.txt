-- Schema Tools生成的主题元数据
-- 业务背景: 高速公路服务区管理系统
-- 生成时间: 2025-07-01 18:58:22
-- 数据库: highway_db

-- 创建表（如果不存在）
CREATE TABLE IF NOT EXISTS metadata (
    id SERIAL PRIMARY KEY,    -- 主键
    topic_name VARCHAR(100) NOT NULL,  -- 业务主题名称
    description TEXT,                  -- 业务主体说明
    related_tables TEXT[],			  -- 相关表名
    biz_entities TEXT[],               -- 主要业务实体名称
    biz_metrics TEXT[],                -- 主要业务指标名称
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    -- 插入时间
);

-- 插入主题数据
INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '日营收分析',
  '基于bss_business_day_data表分析各服务区每日营收结构及支付方式占比',
  'bss_business_day_data',
  '服务区,档口,支付方式,统计日期',
  '收入分布,订单构成,支付方式渗透率'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车流统计分析',
  '通过bss_car_day_count表分析不同车辆类型在各服务区的流量分布特征',
  'bss_car_day_count',
  '服务区,车辆类型,统计日期',
  '车流趋势,车型占比,高峰时段流量'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '档口效能评估',
  '结合两个表数据评估不同档口的单位车流营收产出及运营效率差异',
  'bss_business_day_data,bss_car_day_count',
  '档口,服务区,运营日期',
  '坪效分析,客单价对比,时段效率曲线'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '节假日效应分析',
  '对比法定节假日与平日的车流变化及消费行为差异，支撑资源调度决策',
  'bss_business_day_data,bss_car_day_count',
  '服务区,节假日类型,支付方式',
  '节前节后对比,消费金额波动,车流峰值分析'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '区域对标分析',
  '按地理区域划分统计各服务区营收能力和车流规模的topN排名对比',
  'bss_business_day_data,bss_car_day_count',
  '区域,服务区等级,运营指标',
  '营收排名,车流密度,运营健康度评分'
);

