-- Schema Tools生成的主题元数据
-- 业务背景: 高速公路服务区管理系统
-- 生成时间: 2025-07-21 23:49:14
-- 数据库: highway_db

-- 创建表（如果不存在）
CREATE TABLE IF NOT EXISTS metadata (
    id SERIAL PRIMARY KEY,    -- 主键
    topic_name VARCHAR(100) NOT NULL,  -- 业务主题名称
    description TEXT,                  -- 业务主体说明
    related_tables TEXT[],			  -- 相关表名
    biz_entities TEXT[],               -- 主要业务实体名称
    biz_metrics TEXT[],                -- 主要业务指标名称
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    -- 插入时间
);

-- 插入主题数据
INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '日营业数据分析',
  '分析每个服务区和档口的每日营业收入、订单数量及支付方式分布，掌握经营动态。',
  'bss_business_day_data,bss_service_area,bss_branch',
  '服务区,档口,支付方式,营收',
  '收入趋势,服务区对比,支付方式分布,单均消费'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '车辆流量分析',
  '基于 bss_car_day_count 表，统计各服务区每日车辆流量及车型分布，为运营和安全管理提供数据支持。',
  'bss_car_day_count,bss_service_area',
  '服务区,车辆类别,日期',
  '车辆总数,车型占比,日流量趋势,区域流量对比'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '公司营收对比',
  '结合公司信息和服务区经营数据，分析不同公司下属服务区的营收表现和支付方式偏好。',
  'bss_company,bss_service_area,bss_business_day_data',
  '公司,服务区,支付方式',
  '公司营收对比,单均消费排名,支付方式占比,营收增长率'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '路段流量与营收',
  '关联路段与服务区数据，分析不同路段的车流量和消费情况，评估路段运营效率。',
  'bss_section_route,bss_section_route_area_link,bss_car_day_count,bss_business_day_data',
  '路段,路线,服务区,日期',
  '路段车流量,路段营收总额,流量与营收对比,路段排名'
);

INSERT INTO metadata(topic_name, description, related_tables, biz_entities, biz_metrics) VALUES
(
  '服务区运营状态分析',
  '分析不同运营状态（开放/关闭）的服务区数量、营收及流量，评估整体运营健康度。',
  'bss_service_area,bss_business_day_data,bss_car_day_count',
  '服务区,运营状态,日期',
  '运营服务区数量,关闭服务区数量,运营营收占比,流量分布'
);

